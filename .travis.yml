language: java
env:
  global:
   - secure: "GQCYJKzcPUvv+T+pz+C4Gg6OXPn91aSBuhuzKoAfZQ9OJr99KejS/NTpk1IYJsSaZOk4p7XARQj/AJtVEAekpLiDQUu/wTFg0F/l3tEGL4OdHyO3VhXzTeEb8O9D6X7etgZFijkYXB0K8XQ5afp/F43ckc9Yp06MLqp+TDGYrG1lAID3uv+NZ4y2TMa4Ky0pqfdnH6jxJi0t0IljXVdX7UJxFCdP49W6JlzpZN6lipakyzHTd7bc9INtZ2UpuGIW5CQ1YUoLWfj4EZ+cEVY1LsEOlGlLW6pl4XhVSN2R0Ih1pw0mIe1krU9xwRogh3mav2AIvU5x3xmNyZFYhJPB3oIlqqQhAVRukN+XxCxxCmXX3TGcNWXO5elxYA4sDlhXaLWpfe9hYw7wLtBAPDo6rPnZIMJmQgwNCsklEpWYRxiAMtjj+piaHe8CE31Z3nus+hL4Bl6dTaoxv2AuXXuS9qE7qWwKbfc9OuocU0/t4t3KWH5cSpRCZwItP8vb1RzDqVFR3mscL7q0YnhmVvdEnhPYy2oyFAv8G9VcPD6oJj6TQAoA91HlqpDQIJLJNXQ9cE7PCM5GJ5B7Ki7tgNXPogTQXVa3gIiEtfJwFDmj1Ni9K1zgAWzFzseerDHjbaXDOErkFCZUIPsqs8Dzgqe3Yic0QgFYvkq2Ex9xFF/Qu98="
   - secure: "GkMWxu0y8kDQcRbYu0ULPJz1QCm/bLyQzVepqdw8HE8QmNBrz6tVz951ANdW41/CyvZ//XrRLkcMI2FoRm/UWlhKIPI+v3fDYR1ON8cz5m7+aoIZ1fgoJpeIek+N3bWSr1EnfR+ueipQv3NoHxb236vo1c+uxoernSb90790HUNpuV4Fg09CT62oDpuLmInbq7NreNl7GSsI64mTUB6cw7UUPtQpihYa329arvmZPVmfiJ6I3LaqaKtXgNoGWF/tn3bQwMKI9STAE87J9Uw+h9gkRtYq/9RV6PZy0BW/hfoaxGbAURMjv0KmgvmXytc+hKwfBUNqXChZM+bkNK2UbmJvRJv/ekzYVnBx6r0bk9/dTuO8ATNFd7Gj3l/JhYIurPQMEoREt92l/AigoGUIcIWfUjpG1eB8jESaYc2ICHNvlrNvKRb7lOwRrFfHcj5C/ChpkGwRGURfMHXZqNpN3L8Wrq78UIJlOPenzhGthRicpKldjQMnp8HZBQvQTqGOENKO4nv/rH/3ADHnXzmROk0fmVt95UMQSGHEHbXh193S3QFgSH9fEvAlD1PVSGFFg0IWClf+4iD4XdHMRoPuF3Fe5u8EDFL/eKAaKmUsZ5DpkdhxyU1/zh/tvVT51WWPz/48URwDestnEmHGp8XwzPRrOOxtwpFIUKttQtBVpUc="
branches:
 only:
   - jar-inprogress
dist: trusty
addons:
  apt:
    packages:
      - google-chrome-stable
      - oracle-java8-installer
      - oracle-java8-set-default
script:
#virtual framebuffer for ui part of the test
#  - export DISPLAY=:99.0
#  - sh -e /etc/init.d/xvfb start &
#  - sleep 5
# run tests from builded .jar
  - cd target
#  - chmod +x iot-auto-fat.jar
#  - java -jar iot-auto-fat.jar
  - ls

deploy:
  - provider: s3
    access_key_id: $AWS_ACCESS_KEY_ID
    secret_access_key: $AWS_SECRET_ACCESS_KEY
    bucket: "iotsyst.builds"
    skip_cleanup: true
    local_dir: /home/travis/build/Qoopi/IoT_Auto_Test/target
    upload-dir: dashboard/auto_tests
    on:
      all_branches: true