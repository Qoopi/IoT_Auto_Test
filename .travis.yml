  global:
  - secure: cWOg/MT5gA/J8ueE7rFQMrVXwTK1yv6M7geMBt/198e+kTCk0m8xJmp0vT91qQX1O0FZJMPfdmz6xcDmuexfJ6/SyiJ4mu00/CxqouLOjaenytEMFAMomDqMcvJkSTWomSKhBAhSxwzbxaSimItbRh/4RfqQ8aLZ1Wolgt2+keoQKI927GvIhUqSEnYeOOyjAxz0CwjVih4pZiUXhT1cyHtl6w+24B9hkcVKIwiTvKRO9gZ55xlK1voma1K8K2n43A3NpVUgg2tkkeC+CHNunRTo44N1CHwjbdvkXjXmtVSHcQOE/ti5VobLqyHm/PRYKsTdy2UYJpm30PpJceg+S59d8qFFMOxMEaWHtQYQDj8EF4dbjc1MY9FdH6VVhrb41holHxUX0hT97OM7qMwHrvtBqRozxwIeoNrcF4Ez16ndoPwXrsqW1UVIvZJToA5dHkqIfqbYbjAIvalLRs2JXtdbh74noPq8AgdLWLTqxZR/Y9N/mIW0LvyZNs2sTBILBtfpLX+G7SNR9LlWx7MLYwYo1MiZV7zKl9NS9sGFa1snWvhOpJpb2MZbpvMFKS2yCluAZHx3WaMjyCw4FSE+11NHdROkhGlLqzcHnrtlcEbD8iK59dd6O3QrpSa8ezYPgfpaImQ7GgGzilGhDfsBXXX4rWu2pssXWMqChQGSPYI=

branches:
 only:
   - jar-inprogress

language: java

sudo: required
dist: trusty

addons:
  apt:
    packages:
      - google-chrome-stable
      - oracle-java8-installer
      - oracle-java8-set-default
      - rake

script:
#virtual framebuffer for ui part of the test
#  - export DISPLAY=:99.0
#  - sh -e /etc/init.d/xvfb start &
#  - sleep 5
# run tests from builded .jar
  - cd target
#  - chmod +x iot-auto-fat.jar
#  - java -jar iot-auto-fat.jar

deploy:
  - provider: s3
    access_key_id: $AWS_ACCESS_KEY_ID
    secret_access_key: $AWS_SECRET_ACCESS_KEY
    bucket: "iotsyst.builds"
    skip_cleanup: true
    local_dir: iot-auto-fat.jar
    upload-dir: dashboard/auto_tests
    on:
      all_branches: true