language: java
env:
  global:
#   - secure: "GQCYJKzcPUvv+T+pz+C4Gg6OXPn91aSBuhuzKoAfZQ9OJr99KejS/NTpk1IYJsSaZOk4p7XARQj/AJtVEAekpLiDQUu/wTFg0F/l3tEGL4OdHyO3VhXzTeEb8O9D6X7etgZFijkYXB0K8XQ5afp/F43ckc9Yp06MLqp+TDGYrG1lAID3uv+NZ4y2TMa4Ky0pqfdnH6jxJi0t0IljXVdX7UJxFCdP49W6JlzpZN6lipakyzHTd7bc9INtZ2UpuGIW5CQ1YUoLWfj4EZ+cEVY1LsEOlGlLW6pl4XhVSN2R0Ih1pw0mIe1krU9xwRogh3mav2AIvU5x3xmNyZFYhJPB3oIlqqQhAVRukN+XxCxxCmXX3TGcNWXO5elxYA4sDlhXaLWpfe9hYw7wLtBAPDo6rPnZIMJmQgwNCsklEpWYRxiAMtjj+piaHe8CE31Z3nus+hL4Bl6dTaoxv2AuXXuS9qE7qWwKbfc9OuocU0/t4t3KWH5cSpRCZwItP8vb1RzDqVFR3mscL7q0YnhmVvdEnhPYy2oyFAv8G9VcPD6oJj6TQAoA91HlqpDQIJLJNXQ9cE7PCM5GJ5B7Ki7tgNXPogTQXVa3gIiEtfJwFDmj1Ni9K1zgAWzFzseerDHjbaXDOErkFCZUIPsqs8Dzgqe3Yic0QgFYvkq2Ex9xFF/Qu98="
#   - secure: "GkMWxu0y8kDQcRbYu0ULPJz1QCm/bLyQzVepqdw8HE8QmNBrz6tVz951ANdW41/CyvZ//XrRLkcMI2FoRm/UWlhKIPI+v3fDYR1ON8cz5m7+aoIZ1fgoJpeIek+N3bWSr1EnfR+ueipQv3NoHxb236vo1c+uxoernSb90790HUNpuV4Fg09CT62oDpuLmInbq7NreNl7GSsI64mTUB6cw7UUPtQpihYa329arvmZPVmfiJ6I3LaqaKtXgNoGWF/tn3bQwMKI9STAE87J9Uw+h9gkRtYq/9RV6PZy0BW/hfoaxGbAURMjv0KmgvmXytc+hKwfBUNqXChZM+bkNK2UbmJvRJv/ekzYVnBx6r0bk9/dTuO8ATNFd7Gj3l/JhYIurPQMEoREt92l/AigoGUIcIWfUjpG1eB8jESaYc2ICHNvlrNvKRb7lOwRrFfHcj5C/ChpkGwRGURfMHXZqNpN3L8Wrq78UIJlOPenzhGthRicpKldjQMnp8HZBQvQTqGOENKO4nv/rH/3ADHnXzmROk0fmVt95UMQSGHEHbXh193S3QFgSH9fEvAlD1PVSGFFg0IWClf+4iD4XdHMRoPuF3Fe5u8EDFL/eKAaKmUsZ5DpkdhxyU1/zh/tvVT51WWPz/48URwDestnEmHGp8XwzPRrOOxtwpFIUKttQtBVpUc="
   - secure: "AdMxYEHiJorttWi/JOC8wJEz5p9w2iUaISPcVGnQV0fACMYFLy6kv0mQcCQMwyYCp+ts8XqhsIDJwpG9bsmhshvY5z5cQiALMGYhbGdg7On+LTBMSe3J3aUjYQiThqgeavmV0nOLEozga/AlXfVWrgV1QS37NTGqQezVsSkYydffcLREIepH9KShk/HFvt0HIO43M8J3xs7D4zGoPoG45S2in5sY45o/7D29NpTdGtFmhuM46fmqfhb2iiIPjy7IIqFYbV+DRzj1bPniDrOJ6zvU8wppK+Bko6vxpWvBCrd/BJQWTMwMo+hERr9bLYad0BCaA2VIB0mogQQAlIIYZVAuTSEjoWrjNyAsKl6luKNvnUqP53rsN36hP6PfqIJU3EheDom5l7fjK9EQrfSVUddizpVWHooYiB6eVpZUX8sNh5x+S4NrNvY2B7O/wS5jF0WjHQIeSB8wnyfzpThy+bsKpJ+0jRcJI8EqX3Vc8KMT2tH5tiJCBosaqPR4U8gUNuSeiRRu7RyTX2cXCREngHU//iRh0hKSpx9MEgkg3vAP9/5f/i7aTjPVcYZC9sKUKt9Mwtpz/GyC2K0kBMWD2+60RmKSHnGX28o7Uj/PPVvLt9uTGfgkHPVH64xMIe5cz+skNSxGIlI2pfEG4kvDFP+1yQAnazvMfRUYmAlO+fM="
   - secure: "UQL5yp/TNaWXkdfD+XCiE5D3cPCeaAcGkgQNgT11IiLr1ylWQKw4uKsQYyFbAXyH/1z5K9e43uxLdOtAeDfP5EwHigTeF0P24WqLM5PbZnQufDHj4Md8oucfXMlA+RWCI96QWVgwZ84KT8eJoPZL+//iQPznoys82VO94iEp2XtJD5h4acwsudysSa/+t/KtKIWhZMqEQDVtccLyNetZKrfPwfB0LltRuPOTCoF6RhigqWCSR07IdZyow8cnyUVSYzNELb73PJ2Zdm2rXfop9lJP3KegohcKQYO31ye0a6hvIl40ky/eZKBhv0PfU39djJzpCW3uhr8hDduSj0zIS5fKh2bftsOvOIa7jaGMaZaBhEjUyPxKWywK79giRilyBFJACMxlJwR3VoAZv/1/HhQ93fY8xel3vHWQLUjKzvjsm9UkTiqwWtkVsalQcbCVAJeLFl+/s2ZCapUSbjbEUHd93CmPHtWfWUtGm4M0ll91JudM7f14UPKVc9MF4fe6XAgdGUwROKxevDcGXHqmB+mxEbSgd6hMs5JHOys6ldxTLkEjBwvjo+r92JrccafQuXtq9rscLvBGJL2KcxrUbBYL6TXoptL3utNJqd91wMi2gijni0aiCGp01/2b5ZtLwydpi1xjgcFLY3CRBOnye1ss94pYzYtl8YEARZZXBLw="
branches:
 only:
   - jar-inprogress
dist: trusty
addons:
  apt:
    packages:
      - google-chrome-stable
      - oracle-java8-installer
      - oracle-java8-set-default
script:
#virtual framebuffer for ui part of the test
#  - export DISPLAY=:99.0
#  - sh -e /etc/init.d/xvfb start &
#  - sleep 5
# run tests from builded .jar
  - cd target
#  - chmod +x iot-auto-fat.jar
#  - java -jar iot-auto-fat.jar
  - ls
  - echo $AWS_ACCESS_KEY_ID
  - echo $AWS_SECRET_ACCESS_KEY

deploy:
  - provider: s3
    access_key_id: $AWS_ACCESS_KEY_ID
    secret_access_key: $AWS_SECRET_ACCESS_KEY
    bucket: "iotsyst.builds"
    skip_cleanup: true
    file: /home/travis/build/Qoopi/IoT_Auto_Test/target/iot-auto-fat.jar
    upload-dir: dashboard/auto_tests
    on:
      all_branches: true